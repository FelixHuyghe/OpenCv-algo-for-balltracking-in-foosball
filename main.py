#!/usr/bin/env python
# USAGE
# python main.py --video ball_tracking_example.mp4

# import the necessary packages
import sys
from collections import deque
from imutils.video import VideoStream
import numpy as np
import argparse
import cv2
import imutils
import time
import math


# Python program for slope of line
def slope(x1, y1, x2, y2):
	if (x2 - x1 != 0):
		return (float)(y2 - y1) / (x2 - x1)
	return None


def intercept(s, point):
	return - (s * point[0]) + point[1]

# P1 and P2 describe a straight line
def distance_points_line(p1, p2, p3):
	p1 = np.asarray(p1)
	p2 = np.asarray(p2)
	p3 = np.asarray(p3)
	return np.abs(np.cross(p2 - p1, p1 - p3)) / np.linalg.norm(p2 - p1)


def calculate_intersection(line1, line2):
	m1 = slope(line1[0][0], line1[0][1], line1[1][0], line1[1][1])
	m2 = slope(line2[0][0], line2[0][1], line2[1][0], line2[1][1])
	if m1 is None or m2 is None:
		return None
	c1 = intercept(m1, line1[0])
	c2 = intercept(m2, line2[0])


	x = np.linspace(-10, 10, 500)
	if abs((m2 - m1)) > 0.00005:
		xi = (c1 - c2) / (m2 - m1)
		yi = m1 * xi + c1
		return (xi, yi)
	else:
		return None

clickLocation = (0, 0)

def click_event(event, x, y, flags, params):
	# checking for left mouse clicks
	if event == cv2.EVENT_LBUTTONDOWN:
		# displaying the coordinates
		# on the Shell
		#print(x, ' ', y)
		global clickLocation
		clickLocation = (x, y)
		return (x, y)
	return None


if __name__ == "__main__":
	trueLocations = [(269, 229), (288, 241), (344, 263), (344, 263), (384, 279), (419, 294), (448, 306), (495, 324), (516, 329), (548, 329), (572, 326), (597, 319), None, None, None, None, None, None, (592, 245), (581, 236), (581, 236), (553, 221), (532, 203), (522, 195), (509, 186), (496, 177), (496, 177), (471, 159), (471, 159), (453, 144), (428, 134), (423, 128), (415, 121), (405, 114), (395, 108), (385, 102), (375, 95), (368, 89), (368, 85), (368, 81), (368, 77), (369, 73), (369, 70), (369, 68), (370, 65), (370, 62), (369, 58), (370, 54), (370, 52), (371, 56), (371, 57), (371, 59), (371, 59), (372, 62), (373, 64), (374, 66), (374, 67), (374, 68), (374, 69), (375, 70), (375, 72), (375, 74), (375, 75), (375, 77), (375, 78), (375, 80), (375, 82), (376, 84), (166, 113), (166, 113), (174, 107), (189, 110), (189, 111), (190, 112), (190, 112), (191, 114), (191, 115), (192, 116), (192, 117), (192, 117), (193, 118), (194, 119), (197, 121), (196, 121), (199, 123), (199, 123), (201, 127), (201, 127), (203, 129), (205, 131), (206, 133), (205, 133), (206, 119), (206, 119), (211, 113), (216, 108), (221, 103), (231, 92), (236, 87), (236, 87), (241, 82), (245, 77), (250, 72), (253, 68), (255, 65), (258, 62), (268, 62), (273, 51), (268, 62), (271, 53), (271, 53), (274, 56), (274, 56), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 57), (270, 60), (267, 64), (268, 68), (259, 64), (258, 65), (258, 65), (258, 65), (258, 66), (258, 68), (258, 69), (258, 71), (258, 72), (258, 73), (258, 74), (257, 75), (257, 77), (257, 77), (257, 78), (257, 78), (190, 201), (235, 204), (272, 208), (331, 212), (373, 215), (418, 218), (440, 219), (498, 222), (524, 224), (533, 226), (535, 226), (535, 225), (535, 225), (535, 225), (535, 225), (535, 225), (535, 225), (535, 225), (535, 225), (535, 225), (535, 225), (535, 225), (534, 225), (535, 225), (534, 225), (535, 225), (534, 225), (162, 114), (203, 119), (233, 123), (252, 125), (287, 119), (316, 111), (326, 107), (357, 99), (358, 100), (359, 100), (358, 100), (358, 101), (359, 101), (359, 101), (358, 101), (359, 103), (359, 103), (359, 103), (348, 103), (348, 103), (348, 103), (348, 103), (348, 103), (348, 103), (348, 103), (348, 103), (348, 103), (346, 115), (345, 117), (348, 103), (342, 120), (341, 120), (341, 121), (341, 122), (341, 122), (341, 123), (341, 123), (177, 220), (222, 223), (270, 222), (290, 225), (334, 225), (426, 226), (426, 226), (475, 226), (502, 227), (544, 230), (572, 229), (579, 229), (589, 228), (589, 228), None, None, None, None, None, None, None, None, (596, 223), (593, 222), (593, 222), (587, 220), (587, 220), (582, 219), (576, 218), (569, 215), (566, 214), (553, 214), (552, 214), (534, 214), (531, 212), (528, 211), (528, 211), (518, 209), (513, 209), (507, 208), (507, 208), (497, 207), (497, 207), (178, 224), (178, 224), (244, 228), (266, 240), (273, 249), (273, 249), (285, 262), (315, 283), (315, 283), (325, 291), (347, 313), (347, 313), (380, 329), (380, 329), (402, 326), (412, 324), (422, 320), (432, 315), (441, 310), (450, 306), (450, 306), (461, 299), (484, 293), (488, 290), (496, 286), (504, 283), (513, 279), (520, 276), (528, 273), (536, 270), (544, 267), (552, 265), (556, 263), (559, 261), (579, 256), (583, 254), (589, 251), (589, 251), (593, 249), (595, 246), None, None, None, None, None, None, None, None, None, None, None, None, (596, 208), (594, 205), (592, 203), (589, 200), (586, 197), (581, 195), (576, 192), (572, 189), (568, 187), (564, 184), (559, 182), (555, 179), (551, 177), (548, 175), (546, 172), (543, 170), (534, 172), (524, 168), (520, 164), (520, 164), (517, 162), (514, 160), (510, 158), (506, 157), (502, 155), (498, 154), (495, 152), (491, 151), (487, 149), (484, 148), (480, 147), (477, 146), (474, 145), (470, 144), (467, 142), (460, 141), (460, 141), (456, 139), (454, 138), (452, 137), (451, 136), (449, 135), (430, 135), (428, 134), (428, 134), (425, 133), (425, 133), (425, 133), (421, 131), (415, 130), (415, 130), (413, 130), (410, 130), (406, 130), (403, 130), (401, 130), (398, 129), (396, 129), (393, 128), (390, 128), (386, 128), (384, 128), (381, 127), (378, 127), (375, 126), (372, 126), (372, 126), (369, 125), (369, 125), (367, 124), (364, 122), (363, 121), (363, 121), (349, 121), (349, 121), (340, 123), (339, 124), (339, 124), (337, 123), (336, 123), (334, 122), (332, 123), (329, 123), (327, 124), (324, 123), (322, 124), (320, 124), (318, 125), (316, 125), (314, 125), (311, 126), (308, 126), (306, 126), (303, 127), (300, 128), (297, 128), (294, 128), (293, 128), (290, 128), (287, 129), (285, 129), (284, 129), (282, 128), (280, 130), (277, 128), (276, 129), (276, 129), (276, 129), (274, 131), (272, 129), (261, 129), (261, 129), (261, 129), (261, 129), (250, 138), (249, 138), (248, 139), (247, 140), (246, 140), (245, 141), (244, 142), (243, 142), (241, 142), (239, 143), (237, 144), (235, 145), (233, 146), (230, 147), (229, 148), (227, 149), (225, 150), (223, 151), (221, 152), (217, 154), (217, 154), (213, 156), (213, 156), (211, 157), (209, 159), (209, 158), (207, 160), (203, 162), (201, 163), (201, 163), (197, 166), (195, 166), (193, 168), (191, 170), (189, 170), (187, 171), (185, 172), (183, 174), (181, 175), (179, 177), (178, 178), (178, 178), (175, 182), (175, 182), (174, 183), (173, 185), (172, 187), (170, 189), (169, 191), (151, 191), (151, 191), (150, 192), (148, 194), (158, 194), (149, 200), (139, 205), (138, 207), (137, 209), (135, 211), (134, 213), (133, 216), (132, 216), (131, 218), (129, 220), (129, 220), (125, 225), (123, 227), (121, 229), (119, 231), (117, 234), (115, 236), (112, 238), (110, 241), (108, 243), (106, 246), (103, 248), (101, 251), (99, 253), (96, 256), (94, 258), (92, 261), (89, 264), (87, 267), (87, 267), (82, 273), (80, 276), (77, 279), (75, 282), (73, 285), (70, 289), (68, 292), (65, 295), (63, 299), (60, 302), (58, 306), (54, 311), (52, 314), (50, 316), (48, 318), (44, 320), (44, 320), (43, 320), (42, 321), (40, 321), (39, 321), (38, 321), (38, 321), (38, 321), (38, 320), (40, 319), (40, 319), (41, 318), (43, 316), (46, 315), (139, 194), (185, 195), (222, 194), (273, 189), (286, 192), (325, 191), (363, 192), (363, 191), (362, 192), (353, 192), (353, 192), (353, 192), (353, 187), (354, 187), (346, 183), (345, 181), (344, 180), (344, 179), (343, 178), (342, 177), (342, 176), (341, 175), (341, 174), (340, 173), (339, 172), (338, 171), (337, 170), (336, 169), (335, 170), (335, 168), (334, 167), (333, 167), (332, 166), (332, 165), (331, 165), (331, 165), (329, 164), (329, 163), (328, 163), (327, 162), (326, 162), (325, 162), (324, 162), (323, 161), (322, 161), (321, 161), (320, 161), (320, 161), (319, 160), (318, 160), (317, 160), (197, 104), (216, 105), (242, 106), (255, 104), (256, 102), (258, 99), (268, 99), (276, 93), (279, 89), (281, 86), (282, 83), (284, 80), (290, 74), (293, 72), (293, 72), (296, 70), (297, 69), (305, 65), (307, 63), (307, 63), (310, 61), (313, 59), (316, 57), (319, 54), (319, 54), (322, 51), (325, 50), (328, 53), (329, 54), (329, 56), (329, 59), (331, 60), (346, 60), (346, 60), (346, 60), (346, 60), (346, 60), (346, 60), (346, 60), (346, 60), (350, 74), (346, 60), (359, 72), (359, 73), (360, 75), (361, 76), (362, 77), (364, 80), (365, 81), (367, 85), (369, 87), (370, 89), (371, 91), (373, 94), (374, 96), (377, 98), (378, 100), (380, 102), (382, 104), (384, 106), (385, 107), (389, 111), (391, 112), (393, 114), (393, 114), (395, 116), (396, 118), (398, 120), (400, 121), (401, 123), (403, 125), (405, 126), (407, 127), (408, 130), (408, 130), (410, 131), (413, 134), (415, 135), (417, 137), (419, 139), (420, 141), (112, 140), (145, 139), (210, 132), (209, 132), (275, 121), (275, 121), (317, 127), (317, 127), (334, 129), (356, 136), (356, 136), (356, 136), (356, 136), (356, 137), (356, 136), (356, 136), (350, 136), (356, 137), (350, 137), (350, 137), (350, 137), (350, 137), (350, 137), (343, 136), (343, 137), (342, 138), (342, 138), (342, 139), (342, 139), (342, 140), (341, 141), (341, 141), (341, 142), (341, 142), (341, 143), (340, 144), (340, 144), (340, 145), (339, 145), (339, 145), (338, 145), (337, 146), (337, 146), (338, 146), (168, 105), (196, 108), (210, 108), (227, 109), (253, 111), (254, 110), (254, 110), (254, 110), (254, 110), (254, 110), (254, 110), (252, 111), (253, 110), (248, 110), (246, 109), (245, 109), (243, 109), (242, 109), (240, 109), (237, 109), (235, 109), (235, 109), (234, 109), (232, 109), (231, 110), (229, 110), (227, 110), (226, 110), (225, 111), (223, 111), (221, 110), (220, 110), (219, 111), (215, 111), (213, 111), (214, 111), (213, 111), (193, 132), (202, 125), (219, 118), (236, 110), (251, 104), (278, 95), (287, 89), (300, 85), (318, 76), (328, 71), (346, 71), (346, 71), (359, 65), (360, 65), (360, 65), (361, 65), (362, 66), (364, 66), (366, 66), (367, 66), (369, 67), (371, 67), (372, 68), (374, 68), (376, 68), (378, 69), (379, 69), (381, 69), (382, 69), (384, 69), (385, 70), (387, 70), (390, 70), (392, 71), (392, 71), (394, 71), (394, 72), (396, 71), (398, 72), (398, 72), (400, 72), (402, 72), (405, 73), (406, 73), (407, 74), (407, 74), (408, 75), (409, 75), (410, 76), (410, 77), (411, 78), (412, 78), (244, 211), (253, 211), (253, 211), (246, 210), (243, 209), (241, 208), (237, 207), (232, 206), (227, 205), (222, 204), (217, 203), (212, 202), (207, 201), (201, 200), (201, 200), (201, 200), (279, 183), (327, 183), (383, 183), (421, 183), (478, 182), (478, 182), (513, 182), (571, 181), (595, 182), (191, 187), (191, 187), (205, 186), (219, 185), (242, 181), (256, 181), (274, 178), (284, 177), (293, 177), (313, 176), (322, 173), (333, 171), (340, 170), (340, 170), (370, 168), (381, 167), (392, 165), (404, 164), (415, 162), (415, 162), (426, 157), (426, 156), (428, 141), (440, 141), (444, 129), (444, 124), (445, 120), (445, 115), (447, 110), (449, 105), (451, 101), (453, 96), (454, 91), (456, 87), (458, 82), (459, 78), (461, 74), (462, 71), (463, 69), (465, 65), (466, 61), (468, 57), (469, 54), (469, 54), (469, 55), (470, 57), (471, 59), (471, 60), (472, 62), (473, 64), (474, 65), (474, 67), (474, 69), (474, 70), (475, 72), (476, 73), (477, 75), (477, 76), (479, 78), (480, 80), (480, 82), (481, 84), (482, 86), (483, 87), (484, 89), (485, 91), (485, 92), (486, 94), (487, 96), (487, 98), (488, 99), (488, 101), (489, 103), (489, 105), (490, 107), (491, 109), (492, 111), (493, 113), (494, 115), (495, 117), (496, 119), (497, 121), (499, 123), (500, 125), (501, 127), (196, 118), (233, 119), (285, 120), (368, 123), (368, 123), (469, 125), (497, 120), (497, 120), (531, 105), (571, 81), (564, 79), (549, 62), (520, 47), (505, 47), (492, 47), (465, 70), (453, 80), (442, 85), (437, 89), (439, 94), (441, 102), (442, 107), (442, 113), (444, 123), (445, 128), (445, 128), (447, 138), (442, 150), (448, 155), (448, 155), (451, 159), (454, 160), (454, 160), (456, 161), (465, 164), (469, 165), (474, 166), (478, 167), (482, 168), (486, 169), (491, 171), (495, 172), (499, 174), (503, 175), (507, 177), (512, 178), (516, 180), (521, 181), (524, 183), (527, 185), (530, 187), (532, 189), (550, 189), (551, 190), (554, 192), (556, 194), (560, 196), (564, 198), (568, 200), (572, 202), (576, 204), (581, 206), (585, 208), (585, 208), (591, 212), (593, 213), (595, 215), (595, 215), None, (167, 84), (180, 77), (215, 67), (233, 63), (269, 53), (269, 53), (269, 53), (320, 62), (328, 64), (356, 64), (368, 66), (386, 67), (401, 67), (411, 67), (440, 69), (453, 70), (468, 71), (483, 74), (500, 74), (521, 77), (538, 78), (558, 79), (564, 81), (562, 83), (544, 94), (537, 98), (531, 102), (531, 102), (526, 106), (526, 106), (513, 106), (499, 115), (496, 119), (491, 122), (485, 126), (478, 130), (472, 134), (464, 138), (458, 142), (454, 146), (450, 151), (428, 157), (425, 160), (420, 163), (413, 167), (405, 173), (390, 183), (381, 188), (381, 187), (374, 191), (362, 202), (347, 209), (346, 211), (346, 211), (346, 211), (338, 219), (339, 219), (339, 219), (339, 220), (339, 220), (339, 220), (339, 221), (339, 224), (340, 225), (340, 226), (340, 227), (341, 229), (341, 229), (341, 230), (342, 232), (342, 233), (342, 235), (342, 236), (342, 238), (343, 239), (343, 241), (344, 243), (344, 245), (344, 246), (344, 248), (345, 249), (345, 250), (345, 251), (345, 253), (345, 253), (156, 122), (193, 116), (210, 113), (233, 110), (250, 105), (273, 105), (274, 104), (274, 104), (274, 105), (274, 104), (274, 104), (274, 104), (274, 104), (274, 104), (191, 130), (202, 129), (224, 127), (242, 126), (277, 121), (288, 121), (317, 119), (330, 119), (338, 124), (362, 138), (362, 138), (380, 149), (394, 158), (407, 165), (412, 172), (415, 182), (419, 191), (422, 200), (426, 209), (430, 219), (433, 229), (433, 229), (437, 239), (438, 244), (439, 241), (440, 239), (441, 236), (442, 233), (442, 234), (443, 229), (443, 227), (444, 225), (443, 222), (444, 221), (444, 219), (444, 217), (445, 215), (445, 214), (461, 211), (460, 208), (460, 207), (461, 205), (461, 203), (461, 202), (461, 200), (462, 198), (462, 197), (462, 196), (462, 194), (462, 193), (462, 192), (462, 191), (462, 190), (462, 188), (463, 187), (463, 186), (463, 185), (463, 185), (464, 184), (464, 183), (464, 182), (464, 181), (465, 181), (465, 180), (465, 179), (465, 179), (466, 178), (466, 177), (466, 177), (466, 176), (466, 177), (466, 176), (466, 175), (466, 175), (465, 175), (465, 174), (465, 174), (465, 174), (465, 174), (465, 174), (465, 174), (465, 174), (464, 174), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (464, 175), (273, 218), (277, 224), (284, 231), (289, 237), (294, 242), (294, 242), (307, 252), (313, 257), (318, 262), (324, 267), (329, 272), (329, 272), (332, 276), (332, 286), (332, 290), (332, 295), (332, 300), (332, 305), (332, 310), (331, 314), (331, 321), (331, 321), (331, 327), (330, 329), (330, 331), (151, 104), (169, 98), (193, 96), (196, 103), (202, 112), (209, 121), (216, 130), (223, 139), (231, 149), (238, 159), (244, 169), (249, 180), (267, 194), (269, 201), (272, 212), (277, 223), (283, 235), (287, 246), (292, 258), (306, 282), (306, 282), (306, 282), (318, 307), (324, 321), (327, 328), (324, 330), (319, 327), (316, 323), (313, 317), (310, 311), (307, 305), (304, 300), (301, 294), (298, 289), (295, 284), (292, 279), (289, 273), (287, 269), (287, 269), (285, 264), (284, 261), (286, 262), (286, 262), (287, 262), (289, 264), (290, 264), (291, 265), (293, 266), (293, 266), (294, 266), (295, 267), (296, 268), (297, 268), (298, 271), (299, 271), (300, 273), (301, 273), (301, 274), (302, 275), (303, 276), (304, 277), (213, 188), (243, 190), (248, 195), (264, 206), (264, 206), (264, 213), (265, 217), (267, 227), (267, 227), (269, 232), (252, 232), (251, 232), (251, 232), (251, 232), (251, 232), (239, 232), (237, 232), (236, 232), (234, 231), (233, 231), (232, 230), (230, 230), (227, 231), (224, 231), (221, 230), (219, 230), (216, 231), (213, 230), (211, 230), (208, 230), (205, 230), (203, 230), (200, 230), (198, 230), (196, 230), (193, 230), (190, 231), (93, 183), (116, 184), (140, 185), (174, 188), (192, 189), (218, 191), (241, 192), (247, 198), (255, 198), (255, 198), (260, 220), (267, 232), (267, 230), (268, 226), (268, 223), (268, 219), (268, 216), (268, 213), (268, 211), (268, 209), (268, 206), (269, 201), (270, 199), (270, 197), (272, 197), (273, 197), (274, 198), (276, 198), (277, 198), (278, 199), (279, 200), (281, 200), (282, 200), (283, 201), (284, 201), (287, 202), (288, 203), (289, 203), (289, 203), (290, 204), (291, 204), (291, 204), (293, 205), (295, 205), (296, 205), (297, 206), (298, 206), (300, 207), (197, 118), (233, 93), (233, 93), (252, 81), (285, 66), (295, 63), (323, 52), (330, 62), (333, 64), (357, 71), (367, 74), (382, 80), (381, 80), (395, 84), (418, 94), (444, 101), (454, 106), (470, 112), (485, 118), (494, 121), (494, 121), (536, 137), (551, 143), (567, 150), (568, 150), (583, 156), (82, 172), (93, 175), (107, 177), (121, 179), (135, 182), (143, 184), (184, 192), (197, 195), (197, 195), (214, 199), (230, 202), (267, 208), (274, 211), (290, 215), (290, 215), (310, 218), (325, 219), (338, 221), (375, 229), (387, 232), (387, 232), (422, 237), (435, 238), (435, 238), (434, 238), (439, 234), (441, 231), (445, 224), (446, 223), (446, 223), (458, 223), (470, 218), (472, 217), (474, 215), (474, 212), (476, 210), (479, 207), (482, 204), (485, 203), (488, 201), (491, 199), (494, 197), (497, 195), (499, 194), (502, 192), (505, 191), (508, 189), (510, 188), (513, 187), (516, 185), (519, 184), (523, 183), (524, 182), (526, 181), (527, 180), (529, 180), (530, 179), (545, 175), (546, 174), (547, 174), (548, 173), (550, 173), (553, 173), (555, 172), (558, 171), (561, 171), (563, 171), (566, 170), (569, 170), (571, 169), (574, 169), (577, 169), (579, 169), (582, 169), (585, 169), (588, 168), (590, 168), (592, 168), (593, 168), (594, 168), (595, 169), (597, 169), (615, 169), (617, 169), (99, 148), (112, 148), (125, 147), (151, 147), (151, 147), (159, 146), (182, 147), (190, 146), (202, 146), (214, 146), (227, 146), (239, 146), (247, 146), (272, 147), (277, 146), (287, 147), (296, 148), (323, 147), (323, 147), (332, 148), (332, 148), (330, 149), (328, 149), (328, 149), (326, 150), (325, 151), (323, 152), (323, 152), (321, 154), (320, 155), (320, 155), (319, 156), (318, 157), (317, 158), (316, 159), (315, 161), (314, 161), (312, 162), (311, 162), (309, 163), (308, 163), (304, 165), (303, 166), (301, 167), (300, 168), (298, 169), (297, 170), (297, 170), (293, 172), (293, 172), (188, 151), (210, 152), (232, 152), (246, 150), (281, 152), (294, 153), (338, 154), (338, 154), (367, 160), (381, 165), (401, 170), (418, 175), (432, 181), (432, 181), (461, 188), (477, 193), (514, 204), (513, 204), (532, 210), (550, 210), (590, 229), (590, 228), None, None, None, None, None, (660, 259), None, None, (595, 285), (592, 296), (592, 296), (569, 306), (562, 310), (562, 310), (543, 319), (534, 324), (525, 327), (517, 329), (508, 331), (497, 333), (492, 333), (467, 332), (462, 329), (462, 330), (455, 328), (446, 326), (427, 320), (418, 316), (409, 313), (400, 309), (391, 306), (382, 302), (375, 299), (371, 296), (350, 291), (350, 291), (342, 285), (334, 283), (327, 280), (319, 278), (313, 277), (304, 274), (296, 271), (289, 268), (282, 266), (275, 263), (268, 261), (264, 259), (261, 258), (241, 255), (238, 254), (234, 252), (227, 251), (221, 250), (214, 249), (207, 248), (200, 246), (194, 245), (188, 243), (181, 241), (175, 239), (170, 238), (165, 237), (161, 236), (158, 236), (138, 233), (180, 166), (187, 165), (198, 165), (208, 165), (219, 164), (229, 164), (239, 163), (246, 164), (258, 164), (274, 164), (280, 163), (287, 163), (294, 164), (311, 164), (320, 163), (327, 162), (336, 163), (336, 163), (362, 163), (367, 163), (367, 163), (367, 163), (381, 164), (391, 164), (400, 164), (408, 164), (416, 164), (422, 164), (424, 165), (424, 166), (425, 166), (426, 167), (426, 167), (426, 168), (426, 168), (427, 169), (427, 170), (427, 170), (427, 171), (426, 172), (426, 172), (426, 173), (426, 174), (426, 175), (426, 175), (426, 176), (426, 177), (426, 177), (426, 178), (426, 179), (426, 180), (238, 159), (282, 165), (328, 170), (377, 176), (413, 180), (464, 187), (495, 190), (527, 194), (579, 201), (81, 255), None, (589, 184), (557, 169), (546, 162), (531, 156), (537, 154), (505, 141), (503, 140), (503, 140), (504, 139), (504, 139), (505, 138), (505, 138), (505, 138), (505, 138), (506, 138), (506, 138), (510, 135), (510, 137), (510, 137), (510, 137), (510, 137), (113, 155), (147, 156), (210, 157), (241, 158), (288, 159), (332, 161), (332, 161), (378, 162), (415, 163), (432, 164), (451, 165), (454, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (455, 166), (456, 166), (456, 165), (457, 165), (457, 165), (457, 165), (457, 165), (458, 165), (458, 165), (458, 165), (457, 165), (457, 166), (457, 166), (456, 166), (456, 166), (456, 166), (456, 166), (228, 184), (246, 186), (244, 187), (244, 187), (243, 187), (243, 188), (242, 189), (242, 189), (241, 189), (240, 190), (240, 191), (239, 191), (239, 192), (238, 192), (238, 192), (237, 193), (237, 193), (236, 194), (236, 195), (236, 195), (235, 196), (235, 196), (235, 197), (235, 198), (235, 197), (235, 199), (234, 200), (206, 100), (224, 103), (242, 105), (242, 105), (283, 110), (293, 112), (318, 114), (331, 116), (349, 116), (370, 121), (389, 124), (406, 125), (416, 126), (450, 129), (462, 132), (478, 134), (485, 134), (485, 135), (484, 137), (484, 138), (484, 139), (484, 140), (484, 141), (484, 142), (484, 143), (484, 144), (485, 146), (485, 147), (485, 148), (486, 150), (486, 150), (486, 151), (486, 153), (486, 154), (486, 155), (486, 156), (487, 157), (487, 158), (487, 160), (487, 161), (488, 162), (488, 164), (488, 165), (488, 166), (489, 169), (489, 169), (489, 170), (489, 171), (489, 173), (489, 174), (489, 175), (489, 178), (489, 179), (489, 180), (489, 180), (489, 181), (489, 183), (489, 184), (489, 185), (489, 185), (488, 188), (488, 189), (488, 190), (488, 190), (100, 318), (144, 324), (173, 323), (207, 323), (230, 323), (271, 322), (312, 320), (335, 319), (375, 316), (396, 314), (428, 311), (492, 306), (514, 304), (540, 302), (541, 302), (565, 301), (595, 299), None, None, None, None, (597, 259), (597, 259), (593, 253), (580, 246), (574, 242), (574, 241), (550, 234), (533, 224), (522, 219), (510, 213), (486, 202), (474, 196), (474, 196), (463, 191), (457, 186), (433, 179), (414, 169), (405, 165), (394, 160), (383, 155), (373, 150), (364, 147), (351, 147), (340, 135), (335, 134), (324, 129), (316, 126), (307, 123), (294, 121), (288, 116), (282, 112), (278, 109), (263, 109), (251, 100), (247, 97), (239, 94), (231, 91), (224, 88), (217, 85), (209, 81), (204, 79), (188, 79), (182, 72), (178, 69), (173, 66), (167, 64), (160, 62), (154, 60), (148, 58), (142, 56), (135, 53), (129, 52), (121, 52), (114, 45), (111, 44), (105, 42), (100, 40), (95, 39), (90, 38), (85, 38), (80, 37), (75, 37), (71, 38), (67, 38), (63, 39), (60, 41), (58, 43), (55, 45), (54, 47), (54, 50), (54, 50), (55, 51), (55, 53), (55, 55), (56, 58), (58, 61), (60, 64), (62, 68), (65, 71), (187, 134), (193, 125), (205, 116), (217, 109), (230, 101), (230, 101), (253, 86), (259, 80), (282, 70), (287, 66), (287, 66), (268, 66), (315, 51), (321, 58), (328, 60), (333, 63), (346, 63), (346, 63), (359, 70), (365, 72), (372, 75), (379, 79), (386, 82), (393, 84), (401, 88), (409, 91), (415, 94), (420, 98), (438, 101), (442, 104), (449, 107), (457, 110), (464, 113), (472, 116), (480, 120), (488, 123), (492, 123), (495, 123), (519, 123), (519, 123), (519, 123), (525, 121), (527, 122), (529, 122), (533, 122), (538, 122), (542, 122), (547, 122), (552, 123), (556, 123), (560, 124), (564, 124), (568, 124), (574, 124), (578, 125), (583, 124), (586, 124), (586, 124), (585, 124), (584, 124), (583, 124), (583, 124), (582, 124), (581, 124), (579, 125), (577, 125), (576, 125), (575, 125), (574, 125), (572, 126), (572, 126), (571, 126), (569, 126), (567, 126), (567, 126), (566, 127), (565, 127), (564, 127), (564, 127), (563, 127), (562, 127), (562, 127), (561, 127), (559, 128), (558, 128), (557, 128), (557, 128), (556, 128), (555, 128), (555, 128), (554, 128), (553, 128), (552, 128), (551, 128), (549, 128), (549, 128), (549, 129), (547, 129), (547, 129), (546, 130), (546, 130), (546, 130), (545, 131), (545, 131), (545, 131), (545, 131), (544, 132), (544, 132), (544, 133), (544, 133), (544, 133), (543, 133), (543, 134), (543, 134), (543, 135), (543, 135), (124, 164), (139, 164), (151, 164), (165, 164), (173, 169), (165, 169), (158, 166), (159, 165), (157, 166), (158, 165), (157, 165), (156, 166), (156, 166), (155, 166), (155, 166), (155, 166), (153, 167), (153, 166), (153, 167), (152, 167), (151, 167), (151, 167), (150, 168), (149, 168), (148, 168), (148, 168), (146, 168), (146, 168), (144, 169), (143, 169), (142, 169), (141, 170), (140, 170), (100, 165), (120, 166), (141, 166), (141, 166), (174, 171), (174, 171), (174, 174), (174, 177), (174, 180), (175, 182), (175, 185), (174, 187), (175, 190), (175, 194), (176, 197), (176, 200), (176, 203), (177, 210), (177, 210), (178, 213), (178, 217), (179, 221), (114, 156), (147, 156), (190, 158), (219, 159), (242, 160), (279, 161), (288, 164), (296, 168), (296, 168), (313, 173), (321, 176), (331, 177), (338, 180), (353, 180), (369, 189), (374, 191), (382, 195), (393, 199), (404, 203), (415, 205), (425, 208), (432, 210), (432, 210), (436, 217), (439, 220), (440, 223), (442, 225), (443, 228), (444, 231), (446, 235), (446, 238), (448, 241), (449, 244), (450, 248), (451, 252), (452, 255), (453, 259), (454, 263), (455, 265), (474, 269), (475, 273), (476, 276), (477, 279), (479, 283), (480, 286), (481, 290), (482, 294), (484, 298), (485, 302), (119, 136), (157, 137), (168, 131), (174, 131), (174, 131), (174, 131), (174, 131), (185, 144), (185, 144), (185, 144), (182, 139), (174, 131), (168, 130), (165, 129), (165, 129), (164, 128), (160, 124), (158, 123), (158, 123), (156, 121), (144, 82), (153, 79), (170, 71), (170, 71), (182, 63), (192, 63), (207, 60), (210, 55), (217, 53), (225, 49), (233, 47), (242, 50), (251, 52), (259, 53), (264, 56), (268, 56), (286, 60), (291, 62), (297, 64), (307, 65), (316, 66), (322, 67), (328, 68), (329, 70), (329, 71), (329, 74), (329, 76), (329, 78), (329, 80), (329, 83), (329, 86), (329, 88), (329, 91), (328, 93), (328, 96), (328, 99), (328, 101), (328, 101), (329, 108), (329, 111), (329, 114), (329, 117), (329, 120), (328, 122), (328, 126), (328, 128), (328, 131), (327, 134), (326, 137), (326, 141), (325, 144), (325, 146), (325, 148), (324, 151), (324, 154), (325, 159), (324, 162), (324, 165), (324, 168), (322, 175), (322, 175), (322, 179), (321, 186), (321, 186), (321, 190), (320, 194), (319, 201), (317, 205), (317, 205), (316, 213), (316, 216), (316, 216), (316, 220), (316, 224), (313, 232), (313, 232), (313, 236), (312, 241), (311, 245), (309, 250), (307, 258), (307, 258), (305, 266), (305, 266), (303, 275), (302, 280), (300, 284), (300, 284), (299, 290), (297, 300), (296, 306), (296, 306), (295, 311), (293, 315), (290, 325), (289, 327), (288, 330), (289, 332), (287, 332), (286, 330), (286, 330), (285, 329), (285, 329), (284, 324), (283, 322), (283, 319), (282, 315), (282, 312), (281, 309), (281, 306), (281, 306), (280, 301), (279, 298), (279, 295), (278, 293), (278, 291), (279, 290), (280, 290), (280, 290), (282, 290), (283, 290), (284, 290), (285, 290), (286, 290), (286, 290), (287, 290), (288, 290), (288, 290), (289, 291), (289, 291), (290, 291), (106, 321), (138, 318), (147, 309), (161, 303), (193, 290), (193, 290), (208, 282), (232, 269), (232, 269), (268, 254), (277, 250), (278, 250), (289, 246), (303, 241), (317, 234), (337, 223), (337, 223), (355, 223), (372, 208), (372, 208), (383, 203), (405, 194), (415, 189), (415, 189), (428, 182), (447, 171), (457, 168), (462, 166), (470, 162), (478, 158), (486, 155), (494, 151), (501, 148), (506, 145), (506, 145), (523, 134), (523, 134), (546, 128), (549, 128), (549, 128), (559, 123), (566, 121), (573, 118), (580, 116), (580, 113), (577, 109), (572, 107), (567, 104), (562, 102), (557, 99), (552, 98), (546, 96), (541, 94), (535, 93), (530, 91), (524, 90), (519, 89), (514, 87), (512, 86), (506, 86), (494, 84), (491, 83), (488, 81), (483, 80), (478, 78), (478, 78), (469, 76), (469, 76), (464, 75), (459, 74), (455, 73), (450, 72), (446, 72), (442, 71), (437, 70), (434, 69), (432, 68), (429, 67), (414, 68), (412, 67), (410, 66), (408, 65), (403, 65), (399, 65), (395, 65), (391, 64), (387, 63), (383, 63), (380, 63), (376, 62), (372, 62), (368, 61), (364, 60), (360, 59), (357, 58), (355, 58), (355, 58), (346, 58), (337, 55), (337, 55), (333, 56), (333, 56), (329, 56), (326, 57), (322, 57), (319, 58), (315, 59), (312, 59), (308, 59), (305, 60), (302, 60), (298, 60), (295, 60), (292, 60), (290, 60), (289, 61), (287, 61), (268, 61), (268, 61), (268, 61), (268, 61), (262, 62), (260, 61), (259, 62), (257, 62), (251, 64), (251, 64), (248, 64), (243, 65), (239, 65), (239, 65), (234, 66), (230, 66), (227, 66), (227, 66), (222, 66), (222, 66), (209, 61), (223, 60), (270, 64), (270, 62), (270, 64), (322, 60), (339, 62), (366, 64), (388, 66), (400, 68), (401, 72), (403, 76), (405, 82), (406, 87), (408, 92), (411, 98), (414, 108), (414, 108), (419, 119), (419, 119), (421, 125), (423, 131), (424, 137), (426, 143), (429, 155), (429, 155), (430, 166), (430, 166), (431, 176), (433, 184), (449, 184), (438, 199), (444, 212), (444, 212), (447, 227), (447, 227), (450, 236), (461, 246), (463, 246), (473, 259), (477, 277), (480, 287), (482, 296), (484, 304), (487, 313), (490, 325), (490, 325), (491, 330), (491, 332), (490, 330), (490, 330), (477, 330), (473, 331), (467, 316), (465, 314), (464, 311), (463, 308), (461, 304), (460, 301), (459, 297), (459, 297), (456, 290), (454, 287), (453, 284), (452, 281), (450, 278), (449, 275), (447, 272), (445, 270), (443, 268), (443, 268), (439, 264), (437, 262), (437, 262), (433, 259), (431, 257), (430, 255), (428, 254), (426, 253), (424, 251), (423, 249), (421, 248), (420, 247), (418, 245), (416, 244), (415, 243), (412, 242), (411, 241), (409, 240), (408, 239), (406, 239), (404, 237), (403, 237), (402, 236), (401, 235), (399, 235), (397, 234), (396, 233), (394, 233), (393, 232), (393, 232), (390, 232), (390, 232), (389, 231), (388, 231), (387, 231), (386, 231), (386, 231), (385, 230), (384, 230), (148, 154), (207, 157), (242, 160), (258, 160), (271, 190), (274, 192), (275, 187), (275, 183), (277, 182), (279, 180), (279, 180), (284, 174), (286, 172), (288, 170), (289, 167), (292, 165), (294, 162), (294, 162), (297, 160), (300, 157), (303, 155), (305, 153), (307, 150), (309, 148), (311, 146), (315, 142), (316, 141), (317, 140), (317, 139), (318, 137), (324, 133), (324, 133), (325, 130), (326, 128), (329, 124), (329, 124), (330, 123), (332, 122), (333, 121), (333, 120), (334, 118), (334, 118), (335, 115), (336, 114), (336, 114), (103, 129), (128, 128), (152, 129), (192, 130), (208, 130), (236, 131), (266, 132), (290, 137), (333, 133), (333, 133), (333, 134), (332, 135), (332, 135), (332, 135), (331, 136), (332, 137), (332, 137), (332, 137), (331, 138), (331, 138), (331, 138), (331, 139), (331, 139), (331, 139), (331, 140), (331, 139), (331, 139), (331, 139), (331, 139), (331, 139), (331, 139), (331, 139), (212, 104), (228, 100), (245, 95), (255, 92), (291, 83), (305, 80), (305, 80), (320, 74), (330, 71), (362, 66), (362, 66), (362, 66), (386, 61), (386, 61), (401, 55), (410, 52), (420, 52), (446, 60), (446, 60), (469, 64), (469, 64), (499, 69), (505, 68), (515, 71), (527, 73), (538, 76), (550, 79), (561, 82), (567, 86), (567, 88), (565, 92), (562, 97), (559, 102), (555, 106), (551, 111), (548, 114), (545, 118), (543, 121), (541, 126), (539, 131), (538, 136), (524, 136), (524, 136), (524, 136), (520, 153), (511, 154), (510, 151), (509, 150), (509, 150), (506, 146), (505, 145), (503, 143), (501, 141), (499, 140), (497, 138), (495, 137), (493, 136), (491, 134), (489, 133), (488, 132), (486, 130), (484, 129), (483, 128), (481, 127), (480, 126), (478, 124), (477, 123), (475, 122), (475, 122), (473, 120), (471, 119), (470, 118), (469, 117), (467, 117), (466, 116), (465, 115), (464, 114), (462, 114), (461, 113), (460, 112), (459, 112), (458, 111), (197, 108), (232, 109), (275, 117), (279, 124), (289, 139), (295, 144), (310, 158), (319, 166), (328, 177), (332, 189), (332, 199), (333, 214), (333, 214), (333, 235), (333, 235), (332, 247), (333, 260), (333, 286), (333, 286), (333, 286), (333, 317), (333, 327), (329, 329), (323, 326), (317, 319), (314, 314), (310, 310), (305, 304), (305, 304), (301, 298), (293, 289), (290, 284), (287, 280), (283, 275), (281, 271), (281, 268), (281, 265), (282, 262), (282, 260), (281, 257), (282, 254), (282, 252), (282, 250), (282, 248), (282, 245), (282, 243), (282, 241), (282, 239), (282, 237), (282, 236), (281, 231), (281, 231), (281, 227), (280, 227), (280, 226), (280, 223), (280, 222), (121, 104), (209, 107), (244, 108), (251, 111), (252, 110), (256, 116), (257, 119), (251, 119), (251, 121), (251, 123), (251, 124), (251, 124), (252, 126), (252, 126), (252, 133), (253, 135), (253, 137), (253, 138), (252, 139), (252, 141), (252, 142), (252, 145), (252, 146), (252, 150), (252, 150), (252, 153), (252, 153), (251, 157), (259, 165), (251, 160), (251, 162), (251, 163), (258, 163), (258, 163), (259, 178), (260, 181), (260, 181), (259, 184), (257, 186), (257, 186), (257, 186), (257, 186), (257, 186), (248, 194), (248, 196), (248, 197), (247, 199), (247, 202), (247, 205), (247, 207), (246, 210), (246, 212), (246, 215), (245, 217), (245, 220), (244, 222), (244, 225), (244, 228), (243, 229), (243, 229), (243, 231), (243, 232), (251, 232), (251, 232), (251, 232), (69, 179), (93, 182), (113, 188), (132, 196), (172, 207), (186, 214), (238, 230), (238, 230), (268, 242), (290, 252), (325, 260), (344, 266), (381, 278), (410, 288), (440, 297), (459, 305), (504, 318), (531, 326), (551, 331), None, None, None, None, None, None, None, None, None, None, (593, 276), (556, 258), (548, 250), (535, 242), (522, 235), (510, 228), (510, 228), (485, 215), (468, 205), (468, 202), (468, 202), (468, 202), (467, 198), (467, 198), (467, 194), (467, 192), (467, 192), (466, 190), (466, 188), (465, 187), (466, 186), (465, 183), (465, 181), (465, 180), (465, 181), (463, 177), (463, 175), (463, 175), (462, 172), (462, 171), (461, 170), (460, 169), (460, 168), (459, 167), (458, 166), (458, 165), (457, 164), (457, 163), (456, 162), (456, 162), (455, 161), (455, 160), (454, 159), (454, 159), (453, 159), (453, 158), (453, 158), (452, 157), (452, 157), (452, 157), (451, 157), (451, 157), (451, 157), (451, 156), (451, 157), (451, 156), (450, 156), (450, 156), (450, 156), (450, 156), (450, 156), (450, 156), (450, 157), (450, 157), (450, 157), (450, 158), (450, 158), (450, 158), (218, 112), (242, 107), (255, 104), (257, 102), (257, 101), (257, 100), (257, 99), (257, 99), (257, 98), (257, 98), (257, 97), (256, 97), (256, 96), (256, 95), (255, 94), (255, 94), (255, 93), (254, 93), (254, 92), (253, 92), (253, 92), (252, 92), (251, 91), (251, 91), (250, 91), (248, 91), (248, 90), (247, 90), (247, 90), (245, 90), (245, 90), (245, 91), (244, 91), (243, 90), (242, 90), (241, 91), (240, 91), (240, 91), (239, 91), (239, 91)]
	total_images = len(trueLocations)
	number_of_images_ball_visible = 0
	number_of_correct_positions = 0
	number_of_ball_lost = 0
	number_of_wrong_positions = 0
	for point in trueLocations:
		if point is not None:
			number_of_images_ball_visible +=1


	# Parameters
	ball_radius_should_be_larger_than = 1
	if_previously_this_close_to_bar_now_underneath = 20
	margin_of_error_pixels = 5


	# construct the argument parse and parse the arguments
	ap = argparse.ArgumentParser()
	ap.add_argument("-v", "--video",
					help="path to the (optional) video file")
	ap.add_argument("-b", "--buffer", type=int, default=16,
					help="max buffer size")
	args = vars(ap.parse_args())

	lines = [[(0, 133), (73, 7)],
				 [(6, 326), (140, 6)],
				 [(122, 333), (207, 8)],
				 [(242, 335), (274, 4)],
				 [(362, 335), (343, 5)],
				 [(483, 335), (410, 3)],
				 [(598, 336), (475, 3)],
				 [(598, 127), (544, 13)]]

	# define the lower and upper boundaries of the "green"
	# ball in the HSV color space, then initialize the
	# list of tracked points
	greenLower = (0, 85, 150)
	greenUpper = (50, 255, 255)

	# greenLower = (29, 86, 6)
	# greenUpper = (64, 255, 255)

	pts = deque(maxlen=args["buffer"])

	# if a video path was not supplied, grab the reference
	# to the webcam
	if not args.get("video", False):
		vs = VideoStream(src=0).start()

	# otherwise, grab a reference to the video file
	else:
		vs = cv2.VideoCapture(args["video"])

	# allow the camera or video file to warm up
	time.sleep(2.0)

	# keep looping
	count = 0

	while True:
		# grab the current frame
		frame = vs.read()

		if count == 39:
			a = "fdfd"

		# handle the frame from VideoCapture or VideoStream
		frame = frame[1] if args.get("video", False) else frame

		# if we are viewing a video and we did not grab a frame,
		# then we have reached the end of the video
		if frame is None:
			break

		# resize the frame, blur it, and convert it to the HSV
		# color space
		frame = imutils.resize(frame, width=600)
		blurred = cv2.GaussianBlur(frame, (11, 11), 0)
		hsv = cv2.cvtColor(blurred, cv2.COLOR_BGR2HSV)

		# construct a mask for the color "green", then perform
		# a series of dilations and erosions to remove any small
		# blobs left in the mask
		mask = cv2.inRange(hsv, greenLower, greenUpper)
		mask = cv2.erode(mask, None, iterations=2)
		mask = cv2.dilate(mask, None, iterations=2)

		# find contours in the mask and initialize the current
		# (x, y) center of the ball
		cnts = cv2.findContours(mask.copy(), cv2.RETR_EXTERNAL,
								cv2.CHAIN_APPROX_SIMPLE)
		cnts = imutils.grab_contours(cnts)
		center = None

		# loop over the set of tracked points
		for i in range(2, len(pts)):
			# if either of the tracked points are None, ignore
			# them
			if pts[i - 1] is None or pts[i] is None:
				continue

			# otherwise, compute the thickness of the line and
			# draw the connecting lines
			thickness = int(np.sqrt(args["buffer"] / float(i + 10)) * 2.5)
			cv2.line(frame, pts[i - 1], pts[i], (0, 0, 255), thickness)

		predict_location = False
		# only proceed if at least one contour was found
		if len(cnts) > 0:
			# find the largest contour in the mask, then use
			# it to compute the minimum enclosing circle and
			# centroid
			c = max(cnts, key=cv2.contourArea)
			((x, y), radius) = cv2.minEnclosingCircle(c)
			M = cv2.moments(c)
			possible_center = (int(M["m10"] / M["m00"]), int(M["m01"] / M["m00"]))

			# only proceed if the radius meets a minimum size
			if radius > ball_radius_should_be_larger_than:
				# cv2.circle(frame, (int(x), int(y)), int(radius),(0, 255, 255), 2) # draw the circle and centroid on the frame,
				cv2.circle(frame, possible_center, 3, (255, 0, 0), -1)  # then update the list of tracked points
				center = possible_center
			else:
				predict_location = True
		else:
			predict_location = True
		if predict_location:
			if len(pts) >= 3 and not pts[0] is None and not pts[1] is None and not pts[2] is None:
				nearestIntersect = 0
				nearestIntersectSet = False
				goingLeft = pts[0][0] < pts[2][0]
				curLine = [pts[0], pts[2]]
				for line in lines:
					dist = distance_points_line(line[0], line[1], pts[0])
					if dist < if_previously_this_close_to_bar_now_underneath:
						pointRight = (pts[0][0] + dist, pts[0][1])
						pointLeft = (pts[0][0] - dist, pts[0][1])
						if distance_points_line(line[0], line[1], pointLeft) < distance_points_line(line[0], line[1],
																									pointRight):
							nearestIntersect = pointLeft
						else:
							nearestIntersect = pointRight
						nearestIntersectSet = True
						break
					intersect = calculate_intersection(line, curLine)
					if intersect is not None:
						if not nearestIntersectSet:
							if goingLeft and pts[0][0] > intersect[0]:
								nearestIntersect = intersect
								nearestIntersectSet = True
							elif not goingLeft and pts[0][0] < intersect[0]:
								nearestIntersect = intersect
								nearestIntersectSet = True
						else:
							if goingLeft:
								if pts[0][0] > intersect[0] > nearestIntersect[0]:
									nearestIntersect = intersect
							else:
								if pts[0][0] < intersect[0] < nearestIntersect[0]:
									nearestIntersect = intersect

				if nearestIntersectSet:
					center = (int(nearestIntersect[0]), int(nearestIntersect[1]))
					cv2.circle(frame, center, 3, (255, 255, 0), -1)  # then update the list of tracked points

		# update the points queue
		pts.appendleft(center)

		# show the frame to our screen
		cv2.imshow("Frame", frame)

		name = "generated_images/frame%d.jpg" % count
		# Uncomment this to save the frames
		cv2.imwrite(name, frame)  # save frame as JPEG file

		key = cv2.waitKey(1) & 0xFF

		# if key == ord("n"):
		# 	center = None
		#
		# if key == ord("c"):
		# 	cv2.setMouseCallback("Frame", click_event)
		# 	key = cv2.waitKey(1000000) & 0xFF
		# 	if key == ord("c"):
		# 		center = clickLocation
		# 		print("joepieee", count)
		#
		# print(center)
		# trueLocations.append(center)
		if trueLocations[count] is not None:
			if center is None:
				number_of_ball_lost += 1
			elif math.dist(center, trueLocations[count]) < margin_of_error_pixels:
				number_of_correct_positions += 1
			else:
				number_of_wrong_positions += 1


		count += 1

		# if the 'q' key is pressed, stop the loop
		if key == ord("q"):
			break

	# if we are not using a video file, stop the camera video stream
	if not args.get("video", False):
		vs.stop()

	# otherwise, release the camera
	else:
		vs.release()

	# close all windows
	cv2.destroyAllWindows()
	precision = number_of_correct_positions / (number_of_wrong_positions + number_of_correct_positions)
	recall = number_of_correct_positions / number_of_images_ball_visible
	f1_score = 2*precision*recall/(precision+recall)
	print("Precision: ", precision * 100)
	print("Recall: ", recall * 100)
	print("F1-score", f1_score)